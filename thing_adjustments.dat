<?xml version="1.0" encoding="ISO-8859-1"?>

<!-- This file contains the assortment of adjustments that can be applied to actors
      for the game system. The behaviors of adjustments are varied and configured via
      the assignment of tags. Additionally, many adjustments can target a type of trait
      that the user can select, so fields are used to constrain the valid options. The
      actual net effect of each adjustment is applied via the script associated with
      the adjustment. All of these scripts are applied at a timing of Setup/8000 to
      ensure that they occur at an appropriate point in the overall evaluation cycle.

      The visual behavior of each adjustment is controlled via the various "AdjustShow"
      tags that are assigned, such as whether to show an incrementer and/or a menu for
      user selection. Suitable "InPlay" tags are assigned to control
      whether an adjustment can be permanent or temporary, governing where the actual
      adjustment appears for selection and how its effects are applied.
-->

<document signature="Hero Lab Data">

  <!-- Define the assortment of adjustments for the game system. Adjustments are
        selected on the Personal and In-Play tabs and applied to the character.
  -->

  <!-- Attribute Adjustment -->
  <thing
    id="adjAttr"
    name="Attribute"
    compset="Adjustment"
    description="Select this adjustment to change one of your attributes.">
    <fieldval field="adjCandid" value="component.Attribute"/>
    <tag group="AdjustShow" tag="Increment"/>
    <tag group="AdjustShow" tag="Menu"/>
    <tag group="InPlay" tag="PermOK"/>
    <tag group="InPlay" tag="TempOK"/>
    <eval phase="Setup" priority="8000">
      <before name="Calc trtFinal"/><![CDATA[
      if (tagis[Helper.Activated] <> 0) then
        field[adjChosen].chosen.field[trtInPlay].value += field[adjUser].value
        endif
      ]]></eval>
    </thing>

  <!-- Saving Throw Adjustment -->
  <thing
    id="adjDef"
    name="Defense"
    compset="Adjustment"
    description="Select this adjustment to change one of your defenses - Armor Class, Fortitude, Reflex or Will.">
    <fieldval field="adjCandid" value="component.Defense"/>
    <tag group="AdjustShow" tag="Increment"/>
    <tag group="AdjustShow" tag="Menu"/>
    <tag group="InPlay" tag="PermOK"/>
    <tag group="InPlay" tag="TempOK"/>
    <eval phase="Setup" priority="8000">
      <before name="Calc trtFinal"/><![CDATA[
      if (tagis[Helper.Activated] <> 0) then
        field[adjChosen].chosen.field[trtInPlay].value += field[adjUser].value
        endif
      ]]></eval>
    </thing>

  <!-- Skill Adjustment -->
  <thing
    id="adjSkill"
    name="Skill"
    compset="Adjustment"
    description="Select this adjustment to change one of your skills.">
    <fieldval field="adjCandid" value="component.Skill"/>
    <tag group="AdjustShow" tag="Increment"/>
    <tag group="AdjustShow" tag="Menu"/>
    <tag group="InPlay" tag="PermOK"/>
    <tag group="InPlay" tag="TempOK"/>
    <eval phase="Setup" priority="8000">
      <before name="Calc trtFinal"/><![CDATA[
      if (tagis[Helper.Activated] <> 0) then
        field[adjChosen].chosen.field[trtInPlay].value += field[adjUser].value
        endif
      ]]></eval>
    </thing>

  <!-- Derived Trait Adjustment -->
  <thing
    id="adjDerived"
    name="Derived Trait"
    compset="Adjustment"
    description="Select this adjustment to change one of your derived traits.">
    <fieldval field="adjCandid" value="component.Derived &amp; User.CanAdjust"/>
    <tag group="AdjustShow" tag="Increment"/>
    <tag group="AdjustShow" tag="Menu"/>
    <tag group="InPlay" tag="PermOK"/>
    <tag group="InPlay" tag="TempOK"/>
    <eval phase="Setup" priority="8000">
      <before name="Calc trtFinal"/><![CDATA[
      if (tagis[Helper.Activated] <> 0) then
        field[adjChosen].chosen.field[trtInPlay].value += field[adjUser].value
        endif
      ]]></eval>
    </thing>

  <!-- Weapon Adjustment -->
  <thing
    id="adjWeapon"
    name="Weapon"
    compset="Adjustment"
    description="Select this adjustment to apply a bonus/penalty to the attack roll of a specific weapon.">
    <fieldval field="adjCandid" value="component.WeaponBase"/>
    <tag group="AdjustShow" tag="Increment"/>
    <tag group="AdjustShow" tag="Menu"/>
    <tag group="InPlay" tag="TempOK"/>
    <eval phase="Setup" priority="8000">
      <before name="Calc wpNetAtk"/><![CDATA[
      if (tagis[Helper.Activated] <> 0) then
        perform field[adjChosen].chosen.field[wpBonus].modify[+,field[adjUser].value,"Adjustment"]
        endif
      ]]></eval>
    </thing>

  <!-- Armor Adjustment -->
  <thing
    id="adjArmor"
    name="Armor"
    compset="Adjustment"
    description="Select this adjustment to apply a bonus/penalty to the armor bonus of a piece of armor.">
    <fieldval field="adjCandid" value="component.ArmorBase"/>
    <tag group="AdjustShow" tag="Increment"/>
    <tag group="AdjustShow" tag="Menu"/>
    <tag group="InPlay" tag="TempOK"/>
    <eval phase="Setup" priority="8000">
      <before name="Calc wpNetAtk"/><![CDATA[
      if (tagis[Helper.Activated] <> 0) then
        field[adjChosen].chosen.field[arAC].value += field[adjUser].value
        endif
      ]]></eval>
    </thing>

  <!-- Power Adjustment -->
  <thing
    id="adjPower"
    name="Power"
    compset="Adjustment"
    description="Select this adjustment to apply a bonus/penalty to the attack bonus of a power.">
    <fieldval field="adjCandid" value="component.Power"/>
    <tag group="AdjustShow" tag="Increment"/>
    <tag group="AdjustShow" tag="Menu"/>
    <tag group="InPlay" tag="TempOK"/>
    <eval phase="Setup" priority="8000">
      <before name="Calc wpNetAtk"/><![CDATA[
      if (tagis[Helper.Activated] <> 0) then
        field[adjChosen].chosen.field[pwAtkMod].value += field[adjUser].value
        endif
      ]]></eval>
    </thing>

  <!-- Resource Adjustment -->
  <thing
    id="adjFeats"
    name="Bonus Feats"
    compset="Adjustment"
    description="Select this adjustment to add to the number of bonus feats you can take.">
    <tag group="AdjustShow" tag="Increment"/>
    <eval phase="Setup" priority="8000">
      <before name="Calc resLeft"/><![CDATA[
      if (tagis[Helper.Activated] <> 0) then
        hero.child[resFeats].field[resMax].value += field[adjUser].value
        endif
      ]]></eval>
    </thing>
  <thing
    id="adjRituals"
    name="Bonus Rituals"
    compset="Adjustment"
    description="Select this adjustment to add to the number of bonus rituals you can take.">
    <tag group="AdjustShow" tag="Increment"/>
    <eval phase="Setup" priority="8000">
      <before name="Calc resLeft"/><![CDATA[
      if (tagis[Helper.Activated] <> 0) then
        hero.child[resRituals].field[resMax].value += field[adjUser].value
        endif
      ]]></eval>
    </thing>

  <!-- Counter Adjustment -->
  <thing
    id="adjCounter"
    name="Counter"
    compset="Adjustment"
    description="Select this adjustment to keep track of a value that can go up or down.">
    <fieldval field="adjMinimum" value="-99"/>
    <fieldval field="adjMaximum" value="99"/>
    <tag group="AdjustShow" tag="Increment"/>
    <tag group="InPlay" tag="TempOK"/>
    </thing>

  <!-- Ongoing Damage Adjustment -->
  <thing
    id="adjOngoing"
    name="Ongoing Damage"
    compset="Adjustment"
    description="Select this adjustment to keep track of ongoing damage.">
    <fieldval field="adjMinimum" value="-99"/>
    <fieldval field="adjMaximum" value="99"/>
    <tag group="AdjustShow" tag="Increment"/>
    <tag group="InPlay" tag="TempOK"/>
    </thing>

  </document>
